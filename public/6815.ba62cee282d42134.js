"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6815],{6815:(M,p,s)=>{s.r(p),s.d(p,{AdminpendingagentsPageModule:()=>x});var m=s(6895),h=s(4719),i=s(191),f=s(5181),u=s(5861),n=s(4650),A=s(2796),v=s(1056),P=s(4941);function Z(t,d){if(1&t){const e=n.EpF();n.TgZ(0,"ion-card")(1,"ion-row")(2,"ion-col",3),n._uU(3),n.qZA()(),n.TgZ(4,"ion-row")(5,"ion-col",4),n._uU(6),n.qZA(),n.TgZ(7,"ion-col",4),n._uU(8),n.qZA()(),n.TgZ(9,"ion-row")(10,"ion-col",4)(11,"ion-button",5),n.NdJ("click",function(){const o=n.CHM(e),a=o.$implicit,c=o.index,l=n.oxw();return n.KtG(l.reject(a.email,c))}),n._uU(12,"Reject"),n.qZA()(),n.TgZ(13,"ion-col",4)(14,"ion-button",5),n.NdJ("click",function(){const o=n.CHM(e),a=o.$implicit,c=o.index,l=n.oxw();return n.KtG(l.approve(a.email,c))}),n._uU(15,"Approve"),n.qZA()()()()}if(2&t){const e=d.$implicit;n.xp6(3),n.hij(" ",e.name," "),n.xp6(3),n.hij(" Mob: ",e.mobile," "),n.xp6(2),n.hij(" Email: ",e.email," ")}}const y=[{path:"",component:(()=>{class t{constructor(e,r,o){this.firestore=e,this.commondataService=r,this.auth=o,this.users=[]}ngOnInit(){}ionViewWillEnter(){this.users=this.commondataService.allPendingAgents}reject(e,r){var o=this;return(0,u.Z)(function*(){console.log(e,r);for(var a=0;a<o.users.length;a++)o.users[a].email==e&&(yield o.firestore.collection("users").doc(e).update({approvedbyadmin:"disabled"}).catch(c=>{console.log(c),alert("Unable to process request")}).then(c=>{console.log(c),o.users.splice(r,1)}))})()}approve(e,r){var o=this;return(0,u.Z)(function*(){console.log(e,r);for(var a=0;a<o.users.length;a++)o.users[a].email==e&&(yield o.firestore.collection("users").doc(e).update({approvedbyadmin:"true"}).catch(c=>{console.log(c),alert("Unable to process request")}).then(c=>{console.log(c),o.users.splice(r,1),o.auth.createUserWithEmailAndPassword(e.trim(),"123456").then(function(){var l=(0,u.Z)(function*(g){console.log(g)});return function(g){return l.apply(this,arguments)}}()).catch(l=>{console.log(l),console.log(JSON.parse(JSON.stringify(l)));var g=JSON.parse(JSON.stringify(l));"auth/email-already-in-use"==(g=g.code)&&alert("The email address is already in use by another account.")})}))})()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(A.ST),n.Y36(v.Y),n.Y36(P.zQ))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-adminpendingagents"]],decls:9,vars:1,consts:[[1,"header-color"],["slot","start"],[4,"ngFor","ngForOf"],[2,"text-align","center"],["size","6",2,"text-align","center"],[3,"click"]],template:function(e,r){1&e&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n._UZ(3,"ion-back-button"),n.qZA(),n.TgZ(4,"ion-title"),n._uU(5,"Pending Agent Requests"),n.qZA()()(),n.TgZ(6,"ion-content")(7,"ion-grid"),n.YNc(8,Z,16,3,"ion-card",2),n.qZA()()),2&e&&(n.xp6(8),n.Q6J("ngForOf",r.users))},dependencies:[m.sg,i.oU,i.YG,i.Sm,i.PM,i.wI,i.W2,i.jY,i.Gu,i.Nd,i.wd,i.sr,i.cs]}),t})()}];let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[f.Bz.forChild(y),f.Bz]}),t})(),x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[m.ez,h.u5,i.Pc,T]}),t})()}}]);