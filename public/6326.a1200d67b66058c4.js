"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6326],{6326:(M,u,r)=>{r.r(u),r.d(u,{DashboardPageModule:()=>Z});var b=r(6895),g=r(4719),i=r(191),h=r(5181),o=r(4650),p=r(2796),m=r(1056);function v(a,d){if(1&a&&(o.TgZ(0,"ion-card")(1,"ion-row")(2,"ion-col",9),o._uU(3),o.qZA(),o.TgZ(4,"ion-col",10),o._uU(5),o.qZA()(),o.TgZ(6,"ion-row")(7,"ion-col"),o._uU(8,"Issued Date"),o.qZA(),o.TgZ(9,"ion-col"),o._uU(10),o.qZA()(),o.TgZ(11,"ion-row")(12,"ion-col"),o._uU(13,"Status"),o.qZA(),o.TgZ(14,"ion-col"),o._uU(15),o.qZA()()()),2&a){const n=d.$implicit;o.xp6(3),o.Oqu(n.name),o.xp6(2),o.hij("\u20b9 ",n.disbursedAmount,""),o.xp6(5),o.Oqu(n.disburseDate),o.xp6(5),o.Oqu("A"==n.approvedbyadmin?"Approved":"R"==n.approvedbyadmin?"Rejected":"H"==n.approvedbyadmin?"Hold":"Pending")}}const P=[{path:"",component:(()=>{class a{constructor(n,l,c){this.router=n,this.firestore=l,this.commondataService=c,this.yearValues=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],this.dashboard={},this.top5Records=[],this.dashboard.totalredeem="0",this.dashboard.invalidcases="0",this.dashboard.totalcases="0",this.dashboard.totalpaid="0",this.dashboard.totalpending="0",this.userRole=JSON.parse(localStorage.userData).role,"agent"==this.userRole?(this.firestore.collection("business",e=>e.where("agent","==",JSON.parse(localStorage.userData).email).limit(5)).get().subscribe(e=>{console.log("Top 5 docs here"),console.log(e),e.docs.forEach(s=>{console.log(s.data());var t=s.data();console.log(t),t.id=s.id,this.top5Records.push(t)})}),console.log(this.commondataService.allPendingBusiness),this.firestore.collection("business",e=>e.where("agent","==",JSON.parse(localStorage.userData).email)).get().subscribe(e=>{console.log("all docs here"),console.log(e),this.dashboard.totalcases=e.docs.length,e.docs.forEach(s=>{console.log(s.data());var t=s.data();console.log(t),t.id=s.id,this.commondataService.allPendingBusiness.push(t)})}),console.log(this.commondataService.allPendingBusiness),this.firestore.collection("business",e=>e.where("agent","==",JSON.parse(localStorage.userData).email).where("approvedbyadmin","==","R")).get().subscribe(e=>{console.log("all docs here"),console.log(e),this.dashboard.invalidcases=e.docs.length,e.docs.forEach(s=>{console.log(s.data());var t=s.data();console.log(t),t.id=s.id,this.commondataService.allInvalidBusiness.push(t)})}),console.log(this.commondataService.allInvalidBusiness)):(this.firestore.collection("business",e=>e.where("createdBy","==",JSON.parse(localStorage.userData).email)).get().subscribe(e=>{console.log("all docs here"),console.log(e),this.dashboard.totalcases=e.docs.length,e.docs.forEach(s=>{console.log(s.data());var t=s.data();console.log(t),t.id=s.id,this.commondataService.allPendingBusiness.push(t)})}),console.log(this.commondataService.allPendingBusiness),this.firestore.collection("business",e=>e.where("createdBy","==",JSON.parse(localStorage.userData).email).where("approvedbyadmin","==","R")).get().subscribe(e=>{console.log("all docs here"),console.log(e),this.dashboard.invalidcases=e.docs.length,e.docs.forEach(s=>{console.log(s.data());var t=s.data();console.log(t),t.id=s.id,this.commondataService.allInvalidBusiness.push(t)})}),console.log(this.commondataService.allInvalidBusiness))}goto(n){this.router.navigate([n])}ngOnInit(){}}return a.\u0275fac=function(n){return new(n||a)(o.Y36(h.F0),o.Y36(p.ST),o.Y36(m.Y))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-dashboard"]],decls:33,vars:5,consts:[[1,"header-color"],["slot","start"],[2,"margin","15%"],[2,"text-align","center"],["readonly","",3,"ngModel","ngModelChange"],["readonly","",3,"ngModel","click","ngModelChange"],["placeholder","Enter LAN Number"],[4,"ngFor","ngForOf"],[1,"btnStyle"],["size","8"],["size","4"]],template:function(n,l){1&n&&(o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),o._UZ(3,"ion-back-button"),o.qZA(),o.TgZ(4,"ion-title"),o._uU(5,"Dashboard"),o.qZA()()(),o.TgZ(6,"ion-content")(7,"ion-grid",2)(8,"ion-row",3)(9,"ion-col")(10,"ion-label"),o._uU(11,"Total Paid Points"),o.qZA(),o.TgZ(12,"ion-input",4),o.NdJ("ngModelChange",function(e){return l.dashboard.totalpaid=e}),o.qZA()(),o.TgZ(13,"ion-col")(14,"ion-label"),o._uU(15,"Total Points Pending"),o.qZA(),o.TgZ(16,"ion-input",4),o.NdJ("ngModelChange",function(e){return l.dashboard.totalpending=e}),o.qZA()()(),o.TgZ(17,"ion-row",3)(18,"ion-col")(19,"ion-label"),o._uU(20,"Total Number of Cases"),o.qZA(),o.TgZ(21,"ion-input",5),o.NdJ("click",function(){return l.goto("totalcases")})("ngModelChange",function(e){return l.dashboard.totalcases=e}),o.qZA()(),o.TgZ(22,"ion-col")(23,"ion-label"),o._uU(24,"Total Invalid Cases"),o.qZA(),o.TgZ(25,"ion-input",5),o.NdJ("click",function(){return l.goto("invalidcases")})("ngModelChange",function(e){return l.dashboard.invalidcases=e}),o.qZA()()()(),o.TgZ(26,"ion-item"),o._UZ(27,"ion-searchbar",6),o.qZA(),o.TgZ(28,"div"),o.YNc(29,v,16,4,"ion-card",7),o.qZA(),o.TgZ(30,"div",8)(31,"ion-button"),o._uU(32,"Export to Exel"),o.qZA()()()),2&n&&(o.xp6(12),o.Q6J("ngModel",l.dashboard.totalpaid),o.xp6(4),o.Q6J("ngModel",l.dashboard.totalpending),o.xp6(5),o.Q6J("ngModel",l.dashboard.totalcases),o.xp6(4),o.Q6J("ngModel",l.dashboard.invalidcases),o.xp6(4),o.Q6J("ngForOf",l.top5Records))},dependencies:[b.sg,g.JJ,g.On,i.oU,i.YG,i.Sm,i.PM,i.wI,i.W2,i.jY,i.Gu,i.pK,i.Ie,i.Q$,i.Nd,i.VI,i.wd,i.sr,i.j9,i.cs],styles:[".ion-margin[_ngcontent-%COMP%]{--ion-grid-column-padding: 10px;border-collapse:collapse;border-style:hidden}.ion-margin[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:first-child{font-weight:700}.ion-margin[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border:1px solid black;border-bottom:0;border-right:0}.ion-margin[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:last-child{border-right:1px solid black}.ion-margin[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:last-child{border-bottom:1px solid black}.btnStyle[_ngcontent-%COMP%]{text-align:center}.btnStyleIn[_ngcontent-%COMP%]{--border-radius: 50%}"]}),a})()}];let f=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[h.Bz.forChild(P),h.Bz]}),a})(),Z=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[b.ez,g.u5,i.Pc,f]}),a})()}}]);