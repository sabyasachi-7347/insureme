"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4987],{4987:(C,h,i)=>{i.r(h),i.d(h,{LoginPageModule:()=>y});var m=i(6895),s=i(4719),r=i(191),c=i(5181),f=i(5861),o=i(4650),w=i(4941),P=i(2796),v=i(8960);function Z(n,l){if(1&n&&(o.TgZ(0,"b"),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij("Ver: ",e.appVersions,"")}}const T=[{path:"",component:(()=>{class n{constructor(e,t,a,u,p,g,L){this.router=e,this.auth=t,this.firestore=a,this.formBuilder=u,this.appVer=p,this.plt=g,this.toastController=L,this.passwordShow=!1,this.passwordShowType="password",this.loginForm=this.formBuilder.group({email:["",[s.kI.required]],password:["",[s.kI.required]],passwordShow:[!1,[]]}),console.log(this.appVer),this.appVer.getVersionNumber().then(d=>{this.appVersions=d,console.log(this.appVersions)}).catch(d=>{console.log(d)}),this.devicePlatform=this.plt.is("android")||this.plt.is("ios")?"Mobile":"Web"}ngOnInit(){try{localStorage.pin&&this.goto("loginwithpin")}catch{}}get errorControl(){return this.loginForm.controls}login(){var e=this;return(0,f.Z)(function*(){console.log(e.loginForm.value),""!=e.loginForm.value.email.trim()&&""!=e.loginForm.value.password.trim()?e.auth.signInWithEmailAndPassword(e.loginForm.value.email.trim(),e.loginForm.value.password).then(function(){var t=(0,f.Z)(function*(a){if(console.log(a),(yield e.toastController.create({message:"Logged in with "+e.loginForm.value.email.trim(),duration:5e3,position:"top"})).present(),a.user.uid){const p=e.firestore.collection("users").doc(e.loginForm.value.email.trim());e.colldata=p.get().subscribe(g=>(console.log(g.data()),localStorage.userData=JSON.stringify(g.data()),localStorage.role=JSON.stringify(g.data().role),"admin"==g.data().role?e.goto("admin"):e.goto("loginwithpin"),g.data())),console.log(e.colldata),localStorage.uuid=JSON.stringify(a.user.uid)}});return function(a){return t.apply(this,arguments)}}()):alert("Please enter email and password")})()}goto(e){this.router.navigate([e])}showPassword(){this.passwordShowType=this.passwordShow?"text":"password"}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(c.F0),o.Y36(w.zQ),o.Y36(P.ST),o.Y36(s.qu),o.Y36(v.b),o.Y36(r.t4),o.Y36(r.yF))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login"]],decls:31,vars:5,consts:[["src","../../assets/imgs/loginscreen.PNG","height","50%","width","100%"],[1,"buttonCont"],["novalidate","",3,"formGroup"],["position","floating","form",""],["formControlName","email"],["position","floating"],["formControlName","password",3,"type"],["formControlName","passwordShow","slot","start",3,"ngModel","ngModelChange","ionChange"],[1,"loginButton",3,"click"],[3,"click"],[2,"text-align","center"],[4,"ngIf"]],template:function(e,t){1&e&&(o.TgZ(0,"ion-content"),o._UZ(1,"img",0),o.TgZ(2,"h3",1),o._uU(3,"Login"),o.qZA(),o.TgZ(4,"form",2)(5,"ion-item")(6,"ion-label",3),o._uU(7,"Email ID"),o.qZA(),o._UZ(8,"ion-input",4),o.qZA(),o.TgZ(9,"ion-item")(10,"ion-label",5),o._uU(11,"Password"),o.qZA(),o._UZ(12,"ion-input",6),o.qZA(),o.TgZ(13,"ion-item")(14,"ion-checkbox",7),o.NdJ("ngModelChange",function(u){return t.passwordShow=u})("ionChange",function(){return t.showPassword()}),o.qZA(),o.TgZ(15,"ion-label"),o._uU(16,"Show Password"),o.qZA()(),o.TgZ(17,"div",1)(18,"ion-button",8),o.NdJ("click",function(){return t.login()}),o._uU(19,"Sign In"),o.qZA()(),o._UZ(20,"br"),o.TgZ(21,"div",1)(22,"a",9),o.NdJ("click",function(){return t.goto("register")}),o._uU(23,"Don't have an account ? Sign Up"),o.qZA()(),o._UZ(24,"br"),o.TgZ(25,"div",1)(26,"a",9),o.NdJ("click",function(){return t.goto("forgotpassword")}),o._uU(27,"Forgot Password ?"),o.qZA()()(),o.TgZ(28,"p",10),o._uU(29),o.YNc(30,Z,2,1,"b",11),o.qZA()()),2&e&&(o.xp6(4),o.Q6J("formGroup",t.loginForm),o.xp6(8),o.s9C("type",t.passwordShowType),o.xp6(2),o.Q6J("ngModel",t.passwordShow),o.xp6(15),o.hij("Platform: ",t.devicePlatform," "),o.xp6(1),o.Q6J("ngIf","Web"!=t.devicePlatform))},dependencies:[m.O5,s._Y,s.JJ,s.JL,r.YG,r.nz,r.W2,r.pK,r.Ie,r.Q$,r.w,r.j9,s.sg,s.u],styles:[".loginButton[_ngcontent-%COMP%], .buttonCont[_ngcontent-%COMP%]{text-align:center}"]}),n})()}];let S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[c.Bz.forChild(T),c.Bz]}),n})(),y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[m.ez,s.u5,r.Pc,S,s.UX]}),n})()}}]);