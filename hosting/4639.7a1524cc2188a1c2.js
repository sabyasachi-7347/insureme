"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4639],{4639:(v,g,c)=>{c.r(g),c.d(g,{ManagememberPageModule:()=>F});var d=c(6895),m=c(4719),l=c(191),u=c(5181),p=c(5861),e=c(4650),_=c(2796);function b(i,o){if(1&i&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.s9C("value",t.value),e.xp6(1),e.Oqu(t.name)}}function M(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"ion-input",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openFromDatetime())}),e.qZA()}if(2&i){const t=e.oxw();e.s9C("value",t.selectedFromDate),e.Q6J("readonly",!0)}}function f(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"ion-datetime",16),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedFromDate=a)}),e.qZA(),e.TgZ(2,"ion-button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.hideFromDatetime())}),e._uU(3,"OK"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.selectedFromDate)}}function T(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"ion-input",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openToDatetime())}),e.qZA()}if(2&i){const t=e.oxw();e.s9C("value",t.selectedToDate),e.Q6J("readonly",!0)}}function D(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"ion-datetime",16),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedToDate=a)}),e.qZA(),e.TgZ(2,"ion-button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.hideToDatetime())}),e._uU(3,"OK"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.selectedToDate)}}function k(i,o){if(1&i&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}const Z=[{path:"",component:(()=>{class i{constructor(t){this.firestore=t,this.allMembers=[],this.memberList=[],this.selectedMember="",this.percentEntered="",this.selectedBank="",this.selectedDate="",this.fieldValidation=!0,this.banks=[],this.hideBankDropdown=!1,this.memberListSearch=[]}ngOnInit(){var t=this;return(0,p.Z)(function*(){yield t.firestore.collection("dropdown").doc("bankname").get().subscribe(n=>{console.log(n.data().bankname),t.banks=n.data().bankname}),t.curentUser=JSON.parse(localStorage.userData),t.users=yield t.firestore.collection("users",n=>n.where("enrolledby","==","testuser@gmail.com")).get().subscribe(n=>{console.log(n),n.docs.forEach(a=>{console.log(a.data()),t.allMembers.push(a.data()),t.memberList.push({name:a.data().name,value:a.data().email})})})})()}getMember(t){if(console.log(t),this.fieldValidation=""==this.selectedMember||""==this.percentEntered||""==this.selectedBank||""==this.selectedDate,"all"==this.selectedMember)this.hideBankDropdown=!1,this.selectedBank="all";else{for(var n=0;n<this.allMembers.length;n++)if(this.allMembers[n].email==this.selectedMember){this.selectedBank=this.allMembers[n].bankname?this.allMembers[n].bankname:"";break}this.hideBankDropdown=""!=this.selectedBank}}setBank(t){console.log(t),this.fieldValidation=""==this.selectedMember||""==this.percentEntered||""==this.selectedBank||""==this.selectedDate}setDate(t){console.log(t),this.fieldValidation=""==this.selectedMember||""==this.percentEntered||""==this.selectedBank||""==this.selectedDate}checkPercentage(){this.fieldValidation=""==this.selectedMember||""==this.percentEntered||""==this.selectedBank||""==this.selectedDate}setPercent(){if(console.log("Percent set called"),""!=this.selectedMember&&""!=this.percentEntered&&""!=this.selectedBank){if(this.fieldValidation=!1,!this.selectedToDate||!this.selectedToDate)return void alert("please enter valid from date and to date");var t=this.selectedToDate.split("-")[1],n=this.selectedToDate.split("-")[2],a=this.selectedFromDate.split("-")[1],r=this.selectedFromDate.split("-")[2];if(t!=a)return void alert("Please select date for same month and year");if(n!=r)return void alert("Please select date for same month and year");if("all"==this.selectedMember&&"all"==this.selectedBank){for(var s=0;s<this.allMembers.length;s++)this.selectedBank=this.allMembers[s].bankname?this.allMembers[s].bankname:"",this.firestore.collection("users").doc(this.allMembers[s].email.trim()).set({currentyear:this.selectedFromDate.split("-")[2],currentmonth:this.selectedFromDate.split("-")[1],percentage:this.percentEntered},{merge:!0}).then(()=>{}).catch(C=>{console.log(C)});alert("Percentage set for the users"),this.selectedMember="",this.selectedFromDate="",this.selectedToDate="",this.selectedBank="",this.hideBankDropdown=!1,this.percentEntered=""}else if("all"==this.selectedMember&&"all"!=this.selectedBank){for(s=0;s<this.allMembers.length;s++)this.allMembers[s].bankname==this.selectedBank&&this.firestore.collection("users").doc(this.allMembers[s].email.trim()).set({currentyear:this.selectedFromDate.split("-")[2],currentmonth:this.selectedFromDate.split("-")[1],percentage:this.percentEntered},{merge:!0}).then(()=>{}).catch(h=>{console.log(h)});alert("Percentage set for the users"),this.selectedMember="",this.selectedFromDate="",this.selectedToDate="",this.selectedBank="",this.hideBankDropdown=!1,this.percentEntered=""}else{for(s=0;s<this.allMembers.length;s++)this.allMembers[s].email==this.selectedMember&&this.firestore.collection("users").doc(this.allMembers[s].email.trim()).set({currentyear:this.selectedFromDate.split("-")[2],currentmonth:this.selectedFromDate.split("-")[1],percentage:this.percentEntered},{merge:!0}).then(()=>{}).catch(h=>{console.log(h)});alert("Percentage set for the users"),this.selectedMember="",this.selectedFromDate="",this.selectedToDate="",this.selectedBank="",this.hideBankDropdown=!1,this.percentEntered=""}}else this.fieldValidation=!0,alert("Please fill all required fields")}openFromDatetime(){this.openFromDatetimeField=!0}hideFromDatetime(){if(this.openFromDatetimeField=!1,this.selectedFromDate){this.selectedFromDate=this.selectedFromDate.split("T")[0];var t=this.selectedFromDate.split("-")[2]+"-"+this.selectedFromDate.split("-")[1]+"-"+this.selectedFromDate.split("-")[0];this.selectedFromDate=t}}openToDatetime(){this.openToDatetimeField=!0}hideToDatetime(){if(this.openToDatetimeField=!1,this.selectedToDate){this.selectedToDate=this.selectedToDate.split("T")[0];var t=this.selectedToDate.split("-")[2]+"-"+this.selectedToDate.split("-")[1]+"-"+this.selectedToDate.split("-")[0];this.selectedToDate=t}}searchNameBtn(){this.memberListSearch=[],this.allMembers.forEach(t=>{t.name.includes(this.searchName)&&this.memberListSearch.push(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.ST))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-managemember"]],decls:54,vars:10,consts:[[1,"header-color"],["slot","start"],[1,"buttonCont"],["position","floating"],[2,"color","red"],["placeholder","Select member",3,"ngModel","ngModelChange","ionChange"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[3,"readonly","value","click",4,"ngIf"],[4,"ngIf"],["placeholder","Select bank",3,"ngModel","disabled","ngModelChange","ionChange"],[3,"ngModel","ngModelChange","keyup"],[1,"btnStyle"],[1,"btnStyleIn",3,"click"],[3,"value"],[3,"readonly","value","click"],["placeholder","Select Date","displayFormat","DD-MM-YYYY",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Manage Member"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"h3",2),e._uU(8,"This change need to done every month"),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"ion-item")(11,"ion-label",3),e._uU(12,"Select Member "),e.TgZ(13,"sup",4),e._uU(14,"*"),e.qZA()(),e.TgZ(15,"ion-select",5),e.NdJ("ngModelChange",function(r){return n.selectedMember=r})("ionChange",function(){return n.getMember(n.selectedMember)}),e.TgZ(16,"ion-select-option",6),e._uU(17,"All Members"),e.qZA(),e.YNc(18,b,2,2,"ion-select-option",7),e.qZA()(),e.TgZ(19,"ion-item")(20,"ion-label",3),e._uU(21,"Select From Date "),e.TgZ(22,"sup",4),e._uU(23,"*"),e.qZA()(),e.YNc(24,M,1,2,"ion-input",8),e.YNc(25,f,4,1,"div",9),e.qZA(),e.TgZ(26,"ion-item")(27,"ion-label",3),e._uU(28,"Select To Date "),e.TgZ(29,"sup",4),e._uU(30,"*"),e.qZA()(),e.YNc(31,T,1,2,"ion-input",8),e.YNc(32,D,4,1,"div",9),e.qZA(),e.TgZ(33,"ion-item")(34,"ion-label",3),e._uU(35,"Select Bank "),e.TgZ(36,"sup",4),e._uU(37,"*"),e.qZA()(),e.TgZ(38,"ion-select",10),e.NdJ("ngModelChange",function(r){return n.selectedBank=r})("ionChange",function(){return n.setBank(n.selectedBank)}),e.TgZ(39,"ion-select-option",6),e._uU(40,"All Banks"),e.qZA(),e.YNc(41,k,2,2,"ion-select-option",7),e.qZA()(),e.TgZ(42,"ion-item")(43,"ion-label",3),e._uU(44,"Set % for member "),e.TgZ(45,"sup",4),e._uU(46,"*"),e.qZA()(),e.TgZ(47,"ion-input",11),e.NdJ("ngModelChange",function(r){return n.percentEntered=r})("keyup",function(){return n.checkPercentage()}),e.qZA()(),e._UZ(48,"br"),e.TgZ(49,"div",12)(50,"ion-button",13),e.NdJ("click",function(){return n.setPercent()}),e._uU(51,"Set"),e.qZA()(),e._UZ(52,"br")(53,"br"),e.qZA()),2&t&&(e.xp6(15),e.Q6J("ngModel",n.selectedMember),e.xp6(3),e.Q6J("ngForOf",n.memberList),e.xp6(6),e.Q6J("ngIf",!n.openFromDatetimeField),e.xp6(1),e.Q6J("ngIf",n.openFromDatetimeField),e.xp6(6),e.Q6J("ngIf",!n.openToDatetimeField),e.xp6(1),e.Q6J("ngIf",n.openToDatetimeField),e.xp6(6),e.Q6J("ngModel",n.selectedBank)("disabled",n.hideBankDropdown),e.xp6(3),e.Q6J("ngForOf",n.banks),e.xp6(6),e.Q6J("ngModel",n.percentEntered))},dependencies:[d.sg,d.O5,m.JJ,m.On,l.oU,l.YG,l.Sm,l.W2,l.x4,l.Gu,l.pK,l.Ie,l.Q$,l.t9,l.n0,l.wd,l.sr,l.QI,l.j9,l.cs],styles:[".ion-margin[_ngcontent-%COMP%]{--ion-grid-column-padding: 10px;border-collapse:collapse;border-style:hidden}.ion-margin[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:first-child{font-weight:700}.ion-margin[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border:1px solid black;border-bottom:0;border-right:0}.ion-margin[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:last-child{border-right:1px solid black}.ion-margin[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:last-child{border-bottom:1px solid black}.btnStyle[_ngcontent-%COMP%]{text-align:center}.btnStyleIn[_ngcontent-%COMP%]{--border-radius: 50%}"]}),i})()}];let P=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.Bz.forChild(Z),u.Bz]}),i})(),F=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,m.u5,l.Pc,P]}),i})()}}]);