"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4639],{4639:(C,u,c)=>{c.r(u),c.d(u,{ManagememberPageModule:()=>F});var d=c(6895),m=c(4719),l=c(191),h=c(5181),p=c(5861),e=c(4650),_=c(2796);function b(i,s){if(1&i&&(e.TgZ(0,"ion-select-option",15),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t.value),e.xp6(1),e.Oqu(t.name)}}function f(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ion-input",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openFromDatetime())}),e.qZA()}if(2&i){const t=e.oxw();e.s9C("value",t.selectedFromDate),e.Q6J("readonly",!0)}}function M(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"ion-datetime",17),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedFromDate=a)}),e.qZA(),e.TgZ(2,"ion-button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.hideFromDatetime())}),e._uU(3,"OK"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.selectedFromDate)}}function T(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ion-input",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openToDatetime())}),e.qZA()}if(2&i){const t=e.oxw();e.s9C("value",t.selectedToDate),e.Q6J("readonly",!0)}}function D(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"ion-datetime",17),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedToDate=a)}),e.qZA(),e.TgZ(2,"ion-button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.hideToDatetime())}),e._uU(3,"OK"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.selectedToDate)}}function k(i,s){if(1&i&&(e.TgZ(0,"ion-select-option",15),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}const Z=[{path:"",component:(()=>{class i{constructor(t,n){this.firestore=t,this.router=n,this.allMembers=[],this.memberList=[],this.selectedMember="",this.percentEntered="",this.selectedBank="",this.selectedDate="",this.fieldValidation=!0,this.banks=[],this.hideBankDropdown=!1,this.memberListSearch=[]}ngOnInit(){var t=this;return(0,p.Z)(function*(){yield t.firestore.collection("dropdown").doc("bankname").get().subscribe(n=>{console.log(n.data().bankname),t.banks=n.data().bankname}),t.curentUser=JSON.parse(localStorage.userData),t.users=yield t.firestore.collection("users",n=>n.where("enrolledby","==",t.curentUser.email)).get().subscribe(n=>{console.log(n),n.docs.forEach(a=>{console.log(a.data()),t.allMembers.push(a.data()),t.memberList.push({name:a.data().name,value:a.data().email})})})})()}getMember(t){if(console.log(t),this.fieldValidation=""==this.selectedMember||""==this.percentEntered||""==this.selectedBank||""==this.selectedDate,"all"==this.selectedMember)this.hideBankDropdown=!1,this.selectedBank="all";else{for(var n=0;n<this.allMembers.length;n++)if(this.allMembers[n].email==this.selectedMember){this.selectedBank=this.allMembers[n].bankname?this.allMembers[n].bankname:"",this.hideBankDropdown=!0;break}this.hideBankDropdown=""!=this.selectedBank}}setBank(t){console.log(t),this.fieldValidation=""==this.percentEntered||""==this.selectedBank||""==this.selectedDate}setDate(t){console.log(t),this.fieldValidation=""==this.selectedMember||""==this.percentEntered||""==this.selectedBank||""==this.selectedDate}checkPercentage(){this.fieldValidation=""==this.selectedMember||""==this.percentEntered||""==this.selectedBank||""==this.selectedDate}setPercent(){if(console.log("Percent set called"),""!=this.selectedMember&&""!=this.percentEntered&&""!=this.selectedBank){if(this.fieldValidation=!1,!this.selectedToDate||!this.selectedToDate)return void alert("please enter valid from date and to date");var t=this.selectedToDate.split("-")[1],n=this.selectedToDate.split("-")[2],a=this.selectedFromDate.split("-")[1],r=this.selectedFromDate.split("-")[2];if(t!=a)return void alert("Please select date for same month and year");if(n!=r)return void alert("Please select date for same month and year");if("all"==this.selectedMember&&"all"==this.selectedBank){for(var o=0;o<this.allMembers.length;o++)this.selectedBank=this.allMembers[o].bankname?this.allMembers[o].bankname:"",this.firestore.collection("users").doc(this.allMembers[o].email.trim()).set({currentyear:this.selectedFromDate.split("-")[2],currentmonth:this.selectedFromDate.split("-")[1],percentage:this.percentEntered},{merge:!0}).then(()=>{}).catch(v=>{console.log(v)});alert("Percentage set for the users"),this.selectedMember="",this.selectedFromDate="",this.selectedToDate="",this.selectedBank="",this.hideBankDropdown=!1,this.percentEntered=""}else if("all"==this.selectedMember&&"all"!=this.selectedBank){for(o=0;o<this.allMembers.length;o++)this.allMembers[o].bankname==this.selectedBank&&this.firestore.collection("users").doc(this.allMembers[o].email.trim()).set({currentyear:this.selectedFromDate.split("-")[2],currentmonth:this.selectedFromDate.split("-")[1],percentage:this.percentEntered},{merge:!0}).then(()=>{}).catch(g=>{console.log(g)});alert("Percentage set for the users"),this.selectedMember="",this.selectedFromDate="",this.selectedToDate="",this.selectedBank="",this.hideBankDropdown=!1,this.percentEntered=""}else{for(o=0;o<this.allMembers.length;o++)this.allMembers[o].email==this.selectedMember&&this.firestore.collection("users").doc(this.allMembers[o].email.trim()).set({currentyear:this.selectedFromDate.split("-")[2],currentmonth:this.selectedFromDate.split("-")[1],percentage:this.percentEntered},{merge:!0}).then(()=>{}).catch(g=>{console.log(g)});alert("Percentage set for the users"),this.selectedMember="",this.selectedFromDate="",this.selectedToDate="",this.selectedBank="",this.hideBankDropdown=!1,this.percentEntered=""}}else this.fieldValidation=!0,alert("Please fill all required fields")}openFromDatetime(){this.openFromDatetimeField=!0}hideFromDatetime(){if(this.openFromDatetimeField=!1,this.selectedFromDate){this.selectedFromDate=this.selectedFromDate.split("T")[0];var t=this.selectedFromDate.split("-")[2]+"-"+this.selectedFromDate.split("-")[1]+"-"+this.selectedFromDate.split("-")[0];this.selectedFromDate=t}}openToDatetime(){this.openToDatetimeField=!0}hideToDatetime(){if(this.openToDatetimeField=!1,this.selectedToDate){this.selectedToDate=this.selectedToDate.split("T")[0];var t=this.selectedToDate.split("-")[2]+"-"+this.selectedToDate.split("-")[1]+"-"+this.selectedToDate.split("-")[0];this.selectedToDate=t}}searchNameBtn(){this.memberListSearch=[],this.allMembers.forEach(t=>{t.name.includes(this.searchName)&&this.memberListSearch.push(t)})}goto(t){this.router.navigate([t])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.ST),e.Y36(h.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-managemember"]],decls:56,vars:10,consts:[[1,"header-color"],["slot","start"],["position","floating"],[2,"color","red"],["placeholder","Select member",3,"ngModel","ngModelChange","ionChange"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[3,"readonly","value","click",4,"ngIf"],[4,"ngIf"],["placeholder","Select bank",3,"ngModel","disabled","ngModelChange","ionChange"],[3,"ngModel","ngModelChange","keyup"],[1,"btnStyle"],["shape","round",1,"btnStyleIn",3,"click"],[1,"danger-note"],["expand","full","shape","round",3,"click"],[3,"value"],[3,"readonly","value","click"],["placeholder","Select Date","displayFormat","DD-MM-YYYY",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Manage Member"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-item")(8,"ion-label",2),e._uU(9,"Select Member "),e.TgZ(10,"sup",3),e._uU(11,"*"),e.qZA()(),e.TgZ(12,"ion-select",4),e.NdJ("ngModelChange",function(r){return n.selectedMember=r})("ionChange",function(){return n.getMember(n.selectedMember)}),e.TgZ(13,"ion-select-option",5),e._uU(14,"All Members"),e.qZA(),e.YNc(15,b,2,2,"ion-select-option",6),e.qZA()(),e.TgZ(16,"ion-item")(17,"ion-label",2),e._uU(18,"Select From Date "),e.TgZ(19,"sup",3),e._uU(20,"*"),e.qZA()(),e.YNc(21,f,1,2,"ion-input",7),e.YNc(22,M,4,1,"div",8),e.qZA(),e.TgZ(23,"ion-item")(24,"ion-label",2),e._uU(25,"Select To Date "),e.TgZ(26,"sup",3),e._uU(27,"*"),e.qZA()(),e.YNc(28,T,1,2,"ion-input",7),e.YNc(29,D,4,1,"div",8),e.qZA(),e.TgZ(30,"ion-item")(31,"ion-label",2),e._uU(32,"Select Bank "),e.TgZ(33,"sup",3),e._uU(34,"*"),e.qZA()(),e.TgZ(35,"ion-select",9),e.NdJ("ngModelChange",function(r){return n.selectedBank=r})("ionChange",function(){return n.setBank(n.selectedBank)}),e.TgZ(36,"ion-select-option",5),e._uU(37,"All Banks"),e.qZA(),e.YNc(38,k,2,2,"ion-select-option",6),e.qZA()(),e.TgZ(39,"ion-item")(40,"ion-label",2),e._uU(41,"Set % for member "),e.TgZ(42,"sup",3),e._uU(43,"*"),e.qZA()(),e.TgZ(44,"ion-input",10),e.NdJ("ngModelChange",function(r){return n.percentEntered=r})("keyup",function(){return n.checkPercentage()}),e.qZA()(),e._UZ(45,"br"),e.TgZ(46,"div",11)(47,"ion-button",12),e.NdJ("click",function(){return n.setPercent()}),e._uU(48,"Set"),e.qZA()(),e._UZ(49,"br"),e.TgZ(50,"h5",13),e._uU(51,"Note: This change need to done every month"),e.qZA(),e._UZ(52,"br"),e.qZA(),e.TgZ(53,"ion-footer")(54,"ion-button",14),e.NdJ("click",function(){return n.goto("viewmemberlist")}),e._uU(55,"View Member Business"),e.qZA()()),2&t&&(e.xp6(12),e.Q6J("ngModel",n.selectedMember),e.xp6(3),e.Q6J("ngForOf",n.memberList),e.xp6(6),e.Q6J("ngIf",!n.openFromDatetimeField),e.xp6(1),e.Q6J("ngIf",n.openFromDatetimeField),e.xp6(6),e.Q6J("ngIf",!n.openToDatetimeField),e.xp6(1),e.Q6J("ngIf",n.openToDatetimeField),e.xp6(6),e.Q6J("ngModel",n.selectedBank)("disabled",n.hideBankDropdown),e.xp6(3),e.Q6J("ngForOf",n.banks),e.xp6(6),e.Q6J("ngModel",n.percentEntered))},dependencies:[d.sg,d.O5,m.JJ,m.On,l.oU,l.YG,l.Sm,l.W2,l.x4,l.fr,l.Gu,l.pK,l.Ie,l.Q$,l.t9,l.n0,l.wd,l.sr,l.QI,l.j9,l.cs],styles:[".ion-margin[_ngcontent-%COMP%]{--ion-grid-column-padding: 10px;border-collapse:collapse;border-style:hidden}.ion-margin[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:first-child{font-weight:700}.ion-margin[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border:1px solid black;border-bottom:0;border-right:0}.ion-margin[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:last-child{border-right:1px solid black}.ion-margin[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:last-child{border-bottom:1px solid black}.btnStyle[_ngcontent-%COMP%]{text-align:center}.danger-note[_ngcontent-%COMP%]{color:#c22020;font-size:medium;text-align:center}"]}),i})()}];let P=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(Z),h.Bz]}),i})(),F=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,m.u5,l.Pc,P]}),i})()}}]);