"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6987],{6987:(w,l,a)=>{a.r(l),a.d(l,{AddbusinessPageModule:()=>J});var u=a(6895),o=a(4719),r=a(191),c=a(5181),m=a(5861),e=a(4650),g=a(4941),p=a(2796);function _(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&s){const n=e.oxw().$implicit;e.xp6(2),e.Oqu(n.message)}}function f(s,i){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,_,3,1,"ng-container",16),e.qZA()),2&s){const n=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.typeOfBorrow.hasError(n.type))}}function b(s,i){if(1&s&&(e.TgZ(0,"ion-select-option",22),e._uU(1),e.qZA()),2&s){const n=i.$implicit;e.s9C("value",n),e.xp6(1),e.Oqu(n)}}function A(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&s){const n=e.oxw().$implicit;e.xp6(2),e.Oqu(n.message)}}function Z(s,i){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,A,3,1,"ng-container",16),e.qZA()),2&s){const n=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.bankName.hasError(n.type))}}function v(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&s){const n=e.oxw().$implicit;e.xp6(2),e.Oqu(n.message)}}function x(s,i){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,v,3,1,"ng-container",16),e.qZA()),2&s){const n=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.lanNo.hasError(n.type))}}function h(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&s){const n=e.oxw().$implicit;e.xp6(2),e.Oqu(n.message)}}function T(s,i){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,h,3,1,"ng-container",16),e.qZA()),2&s){const n=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.name.hasError(n.type))}}function N(s,i){if(1&s){const n=e.EpF();e.TgZ(0,"ion-input",23),e.NdJ("click",function(){e.CHM(n);const d=e.oxw();return e.KtG(d.openDatetime())}),e.qZA()}if(2&s){const n=e.oxw();e.s9C("value",n.selectedDate),e.Q6J("readonly",!0)}}function y(s,i){if(1&s){const n=e.EpF();e.TgZ(0,"div")(1,"ion-datetime",24),e.NdJ("ngModelChange",function(d){e.CHM(n);const Q=e.oxw();return e.KtG(Q.selectedDate=d)}),e.qZA(),e.TgZ(2,"ion-button",25),e.NdJ("click",function(){e.CHM(n);const d=e.oxw();return e.KtG(d.hideDatetime())}),e._uU(3,"OK"),e.qZA()()}if(2&s){const n=e.oxw();e.xp6(1),e.Q6J("ngModel",n.selectedDate)}}function q(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&s){const n=e.oxw().$implicit;e.xp6(2),e.Oqu(n.message)}}function k(s,i){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,q,3,1,"ng-container",16),e.qZA()),2&s){const n=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.disburseDate.hasError(n.type))}}function B(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&s){const n=e.oxw().$implicit;e.xp6(2),e.Oqu(n.message)}}function P(s,i){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,B,3,1,"ng-container",16),e.qZA()),2&s){const n=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.disbursedAmount.hasError(n.type))}}function F(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&s){const n=e.oxw().$implicit;e.xp6(2),e.Oqu(n.message)}}function D(s,i){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,F,3,1,"ng-container",16),e.qZA()),2&s){const n=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.remarks.hasError(n.type))}}const U=[{path:"",component:(()=>{class s{constructor(n,t,d){this.formBuilder=n,this.auth=t,this.firestore=d,this.openDatetimeField=!1,this.selectedDate="",this.banks=[],this.addBusinessForm=this.formBuilder.group({typeOfBorrow:["",[o.kI.required]],bankName:["",[o.kI.required]],lanNo:["",[o.kI.required]],name:["",[o.kI.required,o.kI.pattern("^[a-zA-Z ]+$")]],disburseDate:["",[o.kI.required]],disbursedAmount:["",[o.kI.required,o.kI.pattern("^[0-9]{1,7}")]],remarks:["",[o.kI.required]]}),this.errorMessages={typeOfBorrow:[{type:"required",message:"Please\xa0select type of borrow"}],bankName:[{type:"required",message:"Please\xa0select bank name"}],lanNo:[{type:"required",message:"Please\xa0enter LAN number"}],name:[{type:"required",message:"Please\xa0enter customer name"},{type:"pattern",message:"Please\xa0enter valid name"}],disburseDate:[{type:"required",message:"please select disbursed date"}],disbursedAmount:[{type:"required",message:"Please\xa0enter disbursed amount"},{type:"pattern",message:"Please\xa0enter valid amount"}],remarks:[{type:"required",message:"Please\xa0enter remarks"}]}}get errorControl(){return this.addBusinessForm.controls}get typeOfBorrow(){return this.addBusinessForm.get("typeOfBorrow")}get bankName(){return this.addBusinessForm.get("bankName")}get lanNo(){return this.addBusinessForm.get("lanNo")}get name(){return this.addBusinessForm.get("name")}get disburseDate(){return this.addBusinessForm.get("disburseDate")}get disbursedAmount(){return this.addBusinessForm.get("disbursedAmount")}get remarks(){return this.addBusinessForm.get("remarks")}ngOnInit(){var n=this;return(0,m.Z)(function*(){yield n.firestore.collection("dropdown").doc("bankname").get().subscribe(t=>{console.log(t.data().bankname),n.banks=t.data().bankname})})()}openDatetime(){this.openDatetimeField=!0}hideDatetime(){if(this.openDatetimeField=!1,this.selectedDate){this.selectedDate=this.selectedDate.split("T")[0];var n=this.selectedDate.split("-")[2]+"-"+this.selectedDate.split("-")[1]+"-"+this.selectedDate.split("-")[0];this.selectedDate=n}}addNewBusiness(){var n=this;return(0,m.Z)(function*(){n.curentUser=JSON.parse(localStorage.userData),yield n.firestore.collection("business").doc().set({typeOfBorrow:n.addBusinessForm.value.typeOfBorrow.trim(),bankName:n.addBusinessForm.value.bankName.trim(),lanNo:n.addBusinessForm.value.lanNo.trim(),name:n.addBusinessForm.value.name.trim(),disburseDate:n.selectedDate.trim(),disbursedAmount:n.addBusinessForm.value.disbursedAmount.trim(),approvedbyadmin:"P",remarks:n.addBusinessForm.value.remarks.trim(),createdBy:n.curentUser.email,createdByName:n.curentUser.name,agent:n.curentUser.enrolledby,agentName:n.curentUser.enrolledbyName}).catch(t=>{console.log(t),alert("Unable to process request")}).then(t=>{console.log(t),alert("Business added sucessfully"),n.addBusinessForm.reset()})})()}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(o.qu),e.Y36(g.zQ),e.Y36(p.ST))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-addbusiness"]],decls:57,vars:12,consts:[[1,"header-color"],["slot","start"],["src","../../assets/imgs/addmembers.png","height","35%","width","100%"],["novalidate","",3,"formGroup"],["position","floating"],["placeholder","Type of Loans","interface","action-sheet","formControlName","typeOfBorrow"],["value","home"],["value","personal"],["value","mortgage"],["value","business"],[4,"ngFor","ngForOf"],["placeholder","Bank Name","formControlName","bankName"],[3,"value",4,"ngFor","ngForOf"],["formControlName","lanNo"],["formControlName","name"],[3,"readonly","value","click",4,"ngIf"],[4,"ngIf"],["formControlName","disbursedAmount"],["formControlName","remarks"],[1,"buttonCont"],[1,"loginButton",3,"disabled","click"],[1,"serror-message"],[3,"value"],[3,"readonly","value","click"],["placeholder","Select Date","displayFormat","DD-MM-YYYY","formControlName","disburseDate",3,"ngModel","ngModelChange"],[3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Add Business"),e.qZA()()(),e.TgZ(6,"ion-content"),e._UZ(7,"img",2),e.TgZ(8,"form",3)(9,"ion-item")(10,"ion-label",4),e._uU(11,"Type of Loans"),e.qZA(),e.TgZ(12,"ion-select",5)(13,"ion-select-option",6),e._uU(14,"Home"),e.qZA(),e.TgZ(15,"ion-select-option",7),e._uU(16,"Personal"),e.qZA(),e.TgZ(17,"ion-select-option",8),e._uU(18,"Mortgage"),e.qZA(),e.TgZ(19,"ion-select-option",9),e._uU(20,"Business"),e.qZA()()(),e.YNc(21,f,2,1,"div",10),e.TgZ(22,"ion-item")(23,"ion-label",4),e._uU(24,"Bank Name"),e.qZA(),e.TgZ(25,"ion-select",11),e.YNc(26,b,2,2,"ion-select-option",12),e.qZA()(),e.YNc(27,Z,2,1,"div",10),e.TgZ(28,"ion-item")(29,"ion-label",4),e._uU(30,"Aplication / LAN ID Number "),e.qZA(),e._UZ(31,"ion-input",13),e.qZA(),e.YNc(32,x,2,1,"div",10),e.TgZ(33,"ion-item")(34,"ion-label",4),e._uU(35,"Customer Name"),e.qZA(),e._UZ(36,"ion-input",14),e.qZA(),e.YNc(37,T,2,1,"div",10),e.TgZ(38,"ion-item")(39,"ion-label",4),e._uU(40,"Disbursed Date"),e.qZA(),e.YNc(41,N,1,2,"ion-input",15),e.YNc(42,y,4,1,"div",16),e.qZA(),e.YNc(43,k,2,1,"div",10),e.TgZ(44,"ion-item")(45,"ion-label",4),e._uU(46,"Disbursed Amount "),e.qZA(),e._UZ(47,"ion-input",17),e.qZA(),e.YNc(48,P,2,1,"div",10),e.TgZ(49,"ion-item")(50,"ion-label",4),e._uU(51,"Remarks"),e.qZA(),e._UZ(52,"ion-input",18),e.qZA(),e.YNc(53,D,2,1,"div",10),e.qZA(),e.TgZ(54,"div",19)(55,"ion-button",20),e.NdJ("click",function(){return t.addNewBusiness()}),e._uU(56,"Book Business"),e.qZA()()()),2&n&&(e.xp6(8),e.Q6J("formGroup",t.addBusinessForm),e.xp6(13),e.Q6J("ngForOf",t.errorMessages.typeOfBorrow),e.xp6(5),e.Q6J("ngForOf",t.banks),e.xp6(1),e.Q6J("ngForOf",t.errorMessages.bankName),e.xp6(5),e.Q6J("ngForOf",t.errorMessages.lanNo),e.xp6(5),e.Q6J("ngForOf",t.errorMessages.name),e.xp6(4),e.Q6J("ngIf",!t.openDatetimeField),e.xp6(1),e.Q6J("ngIf",t.openDatetimeField),e.xp6(1),e.Q6J("ngForOf",t.errorMessages.disburseDate),e.xp6(5),e.Q6J("ngForOf",t.errorMessages.disbursedAmount),e.xp6(5),e.Q6J("ngForOf",t.errorMessages.remarks),e.xp6(2),e.Q6J("disabled",!t.addBusinessForm.valid))},dependencies:[u.sg,u.O5,o._Y,o.JJ,o.JL,r.oU,r.YG,r.Sm,r.W2,r.x4,r.Gu,r.pK,r.Ie,r.Q$,r.t9,r.n0,r.wd,r.sr,r.QI,r.j9,r.cs,o.sg,o.u],styles:[".loginButton[_ngcontent-%COMP%], .buttonCont[_ngcontent-%COMP%]{text-align:center}.serror-message[_ngcontent-%COMP%]{color:#f20e0e}"]}),s})()}];let O=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[c.Bz.forChild(U),c.Bz]}),s})(),J=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[u.ez,o.u5,r.Pc,O,o.UX]}),s})()}}]);