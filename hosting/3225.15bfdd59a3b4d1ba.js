"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3225],{3225:(C,p,n)=>{n.r(p),n.d(p,{AdminuploadlampofferPageModule:()=>Z});var g=n(6895),d=n(4719),l=n(191),u=n(5181),c=n(5861),e=n(4650),f=n(1056),h=n(2796),y=n(5827);function v(t,r){if(1&t&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.s9C("value",o),e.xp6(1),e.Oqu(o)}}const A=[{path:"",component:(()=>{class t{constructor(o,a,i,s,m){this.commondataService=o,this.firestore=a,this.router=i,this.actionSheetController=s,this.pluginServices=m,this.results=[],this.allUsers=[],this.name="",this.email="",this.years="",this.selectedDate="",this.imageName="",this.clickedimage="",this.uploadpaygrid=""}ngOnInit(){var o=this;return(0,c.Z)(function*(){yield o.firestore.collection("users").get().subscribe(a=>{console.log(a),a.docs.forEach(i=>{console.log(i.data()),o.allUsers.push(i.data().name+" | "+i.data().email+" | "+i.data().mobile),o.results=o.allUsers})}),yield o.firestore.collection("dropdown").doc("yearmonth").get().subscribe(a=>{console.log(a.data().yearmonth),o.years=a.data().yearmonth})})()}handleChange(o){const a=o.target.value.toLowerCase();this.results=this.allUsers.filter(i=>i.toLowerCase().indexOf(a)>-1)}selectUser(o){var a=this;return(0,c.Z)(function*(){var i=o.split(" | ")[1].trim();console.log(i),a.name=o.split(" | ")[0].trim(),a.email=o.split(" | ")[1].trim()})()}imageOptionPopup(o){var a=this;return(0,c.Z)(function*(){var s;console.log(o),a.imageName=o+a.selectedDate,yield(yield a.actionSheetController.create({cssClass:"small-togglePopup",buttons:[{cssClass:"camera-icon",text:"camera",icon:"camera",handler:(s=(0,c.Z)(function*(){console.log("Delete clicked"),yield a.pluginServices.captureImage().then(m=>{a.clickedimage=a.pluginServices.clickedImage,a.uploadpaygrid=a.clickedimage})}),function(){return s.apply(this,arguments)})},{cssClass:"gallery-icon",text:"Gallery",icon:"images",handler:()=>{a.pluginServices.selectFromDevice().then(s=>{a.clickedimage=a.pluginServices.clickedImage,a.uploadpaygrid=a.clickedimage})}},{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]})).present()})()}uploadDetails(){var o=this;return(0,c.Z)(function*(){""!=o.selectedDate?""!=o.uploadpaygrid?yield o.firestore.collection("lampoffer").doc(o.email.trim()+o.selectedDate.trim()).set({date:o.selectedDate.trim(),image:o.uploadpaygrid}).catch(a=>{console.log(a),alert("Unable to process request")}).then(a=>{console.log(a),alert("Offer Set for month "+o.selectedDate),o.selectedDate="",o.uploadpaygrid=""}):alert("Please upload image"):alert("Please select date")})()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(f.Y),e.Y36(h.ST),e.Y36(u.F0),e.Y36(l.BX),e.Y36(y.N))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-adminuploadlampoffer"]],decls:21,vars:3,consts:[[1,"header-color"],["slot","start"],["placeholder","Select member",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"src","click"],["expanded","full",3,"click"],[3,"value"]],template:function(o,a){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Upload Lamp Offer"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-grid")(8,"ion-row")(9,"ion-item")(10,"ion-label"),e._uU(11,"Date"),e.qZA(),e.TgZ(12,"ion-select",2),e.NdJ("ngModelChange",function(s){return a.selectedDate=s}),e.YNc(13,v,2,2,"ion-select-option",3),e.qZA()()(),e.TgZ(14,"ion-row")(15,"ion-col")(16,"img",4),e.NdJ("click",function(){return a.imageOptionPopup("grid")}),e.qZA()()(),e.TgZ(17,"ion-row")(18,"ion-item")(19,"ion-button",5),e.NdJ("click",function(){return a.uploadDetails()}),e._uU(20,"Upload"),e.qZA()()()()()),2&o&&(e.xp6(12),e.Q6J("ngModel",a.selectedDate),e.xp6(1),e.Q6J("ngForOf",a.years),e.xp6(3),e.Q6J("src",""==a.uploadpaygrid?"../../assets/imgs/logo.png":a.uploadpaygrid,e.LSH))},dependencies:[g.sg,d.JJ,d.On,l.oU,l.YG,l.Sm,l.wI,l.W2,l.jY,l.Gu,l.Ie,l.Q$,l.Nd,l.t9,l.n0,l.wd,l.sr,l.QI,l.cs]}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(A),u.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,d.u5,l.Pc,P]}),t})()}}]);