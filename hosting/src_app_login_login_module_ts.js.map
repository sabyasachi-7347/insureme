{"version":3,"file":"src_app_login_login_module_ts.js","mappings":"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","sources":["./src/app/login/login-routing.module.ts","./src/app/login/login.module.ts","./src/app/login/login.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport {\n  AngularFirestore,\n  AngularFirestoreDocument,\n} from '@angular/fire/compat/firestore';\nimport {\n  AngularFireAuth\n} from '@angular/fire/compat/auth';\n\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\nimport { Platform, ToastController } from '@ionic/angular';\nimport { AppVersion } from '@awesome-cordova-plugins/app-version/ngx';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  passwordShow: any = false;\n  passwordShowType: string = \"password\";\n  colldata: any;\n  appVersions:any;\n  devicePlatform: string;\n  // docref: any;\n  constructor(public router:Router,\n   public auth:AngularFireAuth,\n   public firestore:AngularFirestore,\n   public formBuilder: FormBuilder,\n   public appVer:AppVersion,\n   public plt:Platform,\n   public toastController:ToastController\n    ) {\n      console.log(this.appVer);\n      \n      this.appVer.getVersionNumber().then((ver)=>{\n        this.appVersions = ver;\n        console.log(this.appVersions);\n      }).catch((err)=>{\n        console.log(err);\n      })\n\n     if(this.plt.is('android') || this.plt.is('ios')){\n      this.devicePlatform = \"Mobile\";\n     }else{\n      this.devicePlatform = \"Web\";\n     } \n      \n\n     }\n\n     loginForm = this.formBuilder.group({\n      email: ['', [Validators.required]],\n      password: ['', [Validators.required]],\n      passwordShow:[false,[]]\n       });\n\n  ngOnInit() {\n    try{\n      if(localStorage.pin){\n        this.goto('loginwithpin');\n      }else{\n        \n      }\n    }catch(e){\n      \n    }\n  }\n\n  get errorControl() {\n    return this.loginForm.controls;\n  }\n\nasync login(){\n  \n  console.log(this.loginForm.value);\n  if(this.loginForm.value.email.trim() == '' || this.loginForm.value.password.trim() == ''){\n    alert(\"Please enter email and password\");\n    return;\n  }\n    this.auth.signInWithEmailAndPassword(this.loginForm.value.email.trim(),this.loginForm.value.password).then(async (data)=>{\nconsole.log(data);\nvar toast = await this.toastController.create({\n  message: \"Logged in with \"+this.loginForm.value.email.trim(),\n  duration: 5000,\n  position: 'top',\n})\n\ntoast.present();\nif(data.user.uid)\n{\n  const docref:any =  this.firestore.collection(\"users\").doc(this.loginForm.value.email.trim());\n this.colldata = docref.get().subscribe((doc)=>{\n    console.log(doc.data());\n    localStorage.userData = JSON.stringify(doc.data());\n    localStorage.role = JSON.stringify(doc.data().role);\n    if(doc.data().role == 'admin'){\n      this.goto('admin');\n    }else{\n      this.goto('loginwithpin')      \n    }\n    return doc.data()\n    \n  })\n  console.log(this.colldata);\n  \n  localStorage.uuid = JSON.stringify(data.user.uid); \n  \n\n}else{\n\n}  \n})\n\n// let database = this.firestore.collection(\"users\").snapshotChanges();\n// let collectionData:any = await database.subscribe((querySnapshot:any) => {\n//   let dataCollection = querySnapshot.map((documentSnapshot) => {\n//     return {\"id\":documentSnapshot.payload.doc.id,\n//     \"name\":documentSnapshot.payload.doc.data()['name']\n//   };\n//   });\n//   console.log(\"Data\");\n  \n//   console.log(dataCollection);\n  \n// })\n\n\n\n\n  }\n  goto(page){\n    this.router.navigate([page]);\n  }\n  showPassword(){\n    if(this.passwordShow){\n      this.passwordShowType = \"text\";\n    }else{\n      this.passwordShowType = \"password\";\n    }\n  }\n}\n"],"names":["Component","Router","AngularFirestore","AngularFireAuth","FormBuilder","Validators","Platform","ToastController","AppVersion","LoginPage","constructor","router","auth","firestore","formBuilder","appVer","plt","toastController","group","email","required","password","passwordShow","console","log","getVersionNumber","then","ver","appVersions","catch","err","is","devicePlatform","ngOnInit","localStorage","pin","goto","e","errorControl","loginForm","controls","login","value","trim","alert","signInWithEmailAndPassword","data","toast","create","message","duration","position","present","user","uid","docref","collection","doc","colldata","get","subscribe","userData","JSON","stringify","role","uuid","page","navigate","showPassword","passwordShowType","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}