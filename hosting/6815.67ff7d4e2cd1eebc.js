"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6815],{6815:(U,p,r)=>{r.r(p),r.d(p,{AdminpendingagentsPageModule:()=>y});var m=r(6895),f=r(4719),i=r(191),h=r(5181),u=r(5861),n=r(4650),A=r(2796),Z=r(1056),v=r(4941);function T(o,g){if(1&o){const e=n.EpF();n.TgZ(0,"ion-card")(1,"ion-row")(2,"ion-col",3),n._uU(3),n.qZA()(),n.TgZ(4,"ion-row")(5,"ion-col",4),n._uU(6," Mob: "),n.qZA(),n.TgZ(7,"ion-col",4),n._uU(8),n.qZA()(),n.TgZ(9,"ion-row")(10,"ion-col",4),n._uU(11," Email: "),n.qZA(),n.TgZ(12,"ion-col",4),n._uU(13),n.qZA()(),n.TgZ(14,"ion-row")(15,"ion-col",4),n._uU(16," Aadhaar Number: "),n.qZA(),n.TgZ(17,"ion-col",4),n._uU(18),n.qZA()(),n.TgZ(19,"ion-row")(20,"ion-col",4),n._UZ(21,"img",5),n.qZA(),n.TgZ(22,"ion-col",4),n._UZ(23,"img",5),n.qZA()(),n.TgZ(24,"ion-row")(25,"ion-col",4)(26,"ion-button",6),n.NdJ("click",function(){const t=n.CHM(e),s=t.$implicit,c=t.index,l=n.oxw();return n.KtG(l.reject(s.email,c))}),n._uU(27,"Reject"),n.qZA()(),n.TgZ(28,"ion-col",4)(29,"ion-button",6),n.NdJ("click",function(){const t=n.CHM(e),s=t.$implicit,c=t.index,l=n.oxw();return n.KtG(l.approve(s.email,c))}),n._uU(30,"Approve"),n.qZA()()()()}if(2&o){const e=g.$implicit;n.xp6(3),n.hij(" ",e.name," "),n.xp6(5),n.hij(" ",e.mobile," "),n.xp6(5),n.hij(" ",e.email," "),n.xp6(5),n.hij(" ",e.aadhaar," "),n.xp6(3),n.Q6J("src",e.aadhaarFront,n.LSH),n.xp6(2),n.Q6J("src",e.aadhaarBack,n.LSH)}}const P=[{path:"",component:(()=>{class o{constructor(e,a,t){this.firestore=e,this.commondataService=a,this.auth=t,this.users=[]}ngOnInit(){}ionViewWillEnter(){this.users=this.commondataService.allPendingAgents}reject(e,a){var t=this;return(0,u.Z)(function*(){console.log(e,a);for(var s=0;s<t.users.length;s++)t.users[s].email==e&&(yield t.firestore.collection("users").doc(e).update({approvedbyadmin:"disabled"}).catch(c=>{console.log(c),alert("Unable to process request")}).then(c=>{console.log(c),t.users.splice(a,1)}))})()}approve(e,a){var t=this;return(0,u.Z)(function*(){console.log(e,a);for(var s=0;s<t.users.length;s++)t.users[s].email==e&&(yield t.firestore.collection("users").doc(e).update({approvedbyadmin:"true"}).catch(c=>{console.log(c),alert("Unable to process request")}).then(c=>{console.log(c),t.users.splice(a,1),t.auth.createUserWithEmailAndPassword(e.trim(),"123456").then(function(){var l=(0,u.Z)(function*(d){console.log(d)});return function(d){return l.apply(this,arguments)}}()).catch(l=>{console.log(l),console.log(JSON.parse(JSON.stringify(l)));var d=JSON.parse(JSON.stringify(l));"auth/email-already-in-use"==(d=d.code)&&alert("The email address is already in use by another account.")})}))})()}}return o.\u0275fac=function(e){return new(e||o)(n.Y36(A.ST),n.Y36(Z.Y),n.Y36(v.zQ))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-adminpendingagents"]],decls:9,vars:1,consts:[[1,"header-color"],["slot","start"],[4,"ngFor","ngForOf"],[2,"text-align","center"],["size","6",2,"text-align","center"],["height","200px","width","350px",3,"src"],[3,"click"]],template:function(e,a){1&e&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n._UZ(3,"ion-back-button"),n.qZA(),n.TgZ(4,"ion-title"),n._uU(5,"Pending Agent Requests"),n.qZA()()(),n.TgZ(6,"ion-content")(7,"ion-grid"),n.YNc(8,T,31,6,"ion-card",2),n.qZA()()),2&e&&(n.xp6(8),n.Q6J("ngForOf",a.users))},dependencies:[m.sg,i.oU,i.YG,i.Sm,i.PM,i.wI,i.W2,i.jY,i.Gu,i.Nd,i.wd,i.sr,i.cs]}),o})()}];let x=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[h.Bz.forChild(P),h.Bz]}),o})(),y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[m.ez,f.u5,i.Pc,x]}),o})()}}]);