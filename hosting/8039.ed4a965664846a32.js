"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8039],{8039:(Z,p,n)=>{n.r(p),n.d(p,{AdminuploadpayoutgridPageModule:()=>C});var m=n(6895),c=n(4719),i=n(191),u=n(5181),d=n(5861),t=n(4650),h=n(1056),y=n(2796),f=n(5827);function v(a,r){if(1&a&&(t.TgZ(0,"ion-select-option",6),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}const P=[{path:"",component:(()=>{class a{constructor(e,o,l,s,g){this.commondataService=e,this.firestore=o,this.router=l,this.actionSheetController=s,this.pluginServices=g,this.results=[],this.allUsers=[],this.name="",this.email="",this.years="",this.selectedDate="",this.imageName="",this.clickedimage="",this.uploadpaygrid=""}ngOnInit(){var e=this;return(0,d.Z)(function*(){yield e.firestore.collection("users").get().subscribe(o=>{console.log(o),o.docs.forEach(l=>{console.log(l.data()),e.allUsers.push(l.data().name+" | "+l.data().email+" | "+l.data().mobile),e.results=e.allUsers})}),yield e.firestore.collection("dropdown").doc("yearmonth").get().subscribe(o=>{console.log(o.data().yearmonth),e.years=o.data().yearmonth})})()}handleChange(e){const o=e.target.value.toLowerCase();this.results=this.allUsers.filter(l=>l.toLowerCase().indexOf(o)>-1)}selectUser(e){var o=this;return(0,d.Z)(function*(){var l=e.split(" | ")[1].trim();console.log(l),o.name=e.split(" | ")[0].trim(),o.email=e.split(" | ")[1].trim()})()}imageOptionPopup(e){var o=this;return(0,d.Z)(function*(){var s;console.log(e),o.imageName=e+o.selectedDate,yield(yield o.actionSheetController.create({cssClass:"small-togglePopup",buttons:[{cssClass:"camera-icon",text:"camera",icon:"camera",handler:(s=(0,d.Z)(function*(){console.log("Delete clicked"),yield o.pluginServices.captureImage().then(g=>{o.clickedimage=o.pluginServices.clickedImage,o.uploadpaygrid=o.clickedimage})}),function(){return s.apply(this,arguments)})},{cssClass:"gallery-icon",text:"Gallery",icon:"images",handler:()=>{o.pluginServices.selectFromDevice().then(s=>{o.clickedimage=o.pluginServices.clickedImage,o.uploadpaygrid=o.clickedimage})}},{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]})).present()})()}uploadDetails(){var e=this;return(0,d.Z)(function*(){""!=e.selectedDate?""!=e.uploadpaygrid?yield e.firestore.collection("payoutsgrid").doc(e.email.trim()+e.selectedDate.trim()).set({name:e.name.trim(),email:e.email.trim(),date:e.selectedDate.trim(),image:e.uploadpaygrid}).catch(o=>{console.log(o),alert("Unable to process request")}).then(o=>{console.log(o),alert("Payout Set for month "+e.selectedDate),e.name="",e.email="",e.selectedDate="",e.uploadpaygrid=""}):alert("Please upload image"):alert("Please select date")})()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.Y),t.Y36(y.ST),t.Y36(u.F0),t.Y36(i.BX),t.Y36(f.N))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-adminuploadpayoutgrid"]],decls:19,vars:3,consts:[[1,"header-color"],["slot","start"],["placeholder","Select member",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"src","click"],["expand","full",3,"click"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Payout Grid Upload"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"ion-grid")(8,"ion-row")(9,"ion-item")(10,"ion-label"),t._uU(11,"Date"),t.qZA(),t.TgZ(12,"ion-select",2),t.NdJ("ngModelChange",function(s){return o.selectedDate=s}),t.YNc(13,v,2,2,"ion-select-option",3),t.qZA()()(),t.TgZ(14,"ion-row")(15,"ion-col")(16,"img",4),t.NdJ("click",function(){return o.imageOptionPopup("grid")}),t.qZA()()(),t.TgZ(17,"ion-button",5),t.NdJ("click",function(){return o.uploadDetails()}),t._uU(18,"Upload"),t.qZA()()()),2&e&&(t.xp6(12),t.Q6J("ngModel",o.selectedDate),t.xp6(1),t.Q6J("ngForOf",o.years),t.xp6(3),t.Q6J("src",""==o.uploadpaygrid?"../../assets/imgs/logo.png":o.uploadpaygrid,t.LSH))},dependencies:[m.sg,c.JJ,c.On,i.oU,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.Ie,i.Q$,i.Nd,i.t9,i.n0,i.wd,i.sr,i.QI,i.cs],styles:["div[scrollx=true][_ngcontent-%COMP%], div[scrolly=true][_ngcontent-%COMP%]{position:relative;overflow:hidden}div[scrollx=true][_ngcontent-%COMP%]{overflow-x:auto}div[scrolly=true][_ngcontent-%COMP%]{overflow-y:auto}"]}),a})()}];let A=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[u.Bz.forChild(P),u.Bz]}),a})(),C=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[m.ez,c.u5,i.Pc,A]}),a})()}}]);