{"version":3,"file":"src_app_payoutallbusiness_payoutallbusiness_module_ts.js","mappings":"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","sources":["./src/app/payoutallbusiness/payoutallbusiness-routing.module.ts","./src/app/payoutallbusiness/payoutallbusiness.module.ts","./src/app/payoutallbusiness/payoutallbusiness.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PayoutallbusinessPage } from './payoutallbusiness.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PayoutallbusinessPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PayoutallbusinessPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PayoutallbusinessPageRoutingModule } from './payoutallbusiness-routing.module';\n\nimport { PayoutallbusinessPage } from './payoutallbusiness.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PayoutallbusinessPageRoutingModule\n  ],\n  declarations: [PayoutallbusinessPage]\n})\nexport class PayoutallbusinessPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { ActivatedRoute, Router } from '@angular/router';\n\n@Component({\n  selector: 'app-payoutallbusiness',\n  templateUrl: './payoutallbusiness.page.html',\n  styleUrls: ['./payoutallbusiness.page.scss'],\n})\nexport class PayoutallbusinessPage implements OnInit {\n  agentDetails: any;\n  allAgentBusiness: any =[];\n  selectedCategory: any = [];\n  totalAmount: number;\n  selection: any;\n  // selectAll: boolean = false;\n\n  constructor(public route:ActivatedRoute, private router: Router,public firestore:AngularFirestore) { \n    this.route.queryParams.subscribe(async params => {\n      if (this.router.getCurrentNavigation().extras.state) {\n         this.agentDetails = this.router.getCurrentNavigation().extras.state;\n         this.selection = this.agentDetails.selection;\n         this.allAgentBusiness = [];\n  this.totalAmount = 0;\n  if(this.selection == 'agent'){\n    await this.firestore.collection(\"business\", ref => ref.where('approvedbyadmin', \"==\", 'A').where('agent', \"==\", this.agentDetails.email)).get().subscribe((doc:any)=>{\n      console.log(doc);\n      doc.docs.forEach((snapDoc)=>{\n        console.log(snapDoc.data());\n        var temp = snapDoc.data();\n        temp.isChecked =true;\n        temp.id = snapDoc.id;\n        temp.amountToPayAgent = temp.amountToPayAgent? temp.amountToPayAgent:0;\n        if(temp.agentPaid != 'true' || temp.agentPaid == undefined){\n          this.totalAmount = this.totalAmount+temp.amountToPayAgent;\n          // temp.amountToPayAgent = (temp.amountToPayAgent == '' || temp.amountToPayAgent == 'NaN')? 0 : temp.amountToPayAgent;\n          this.allAgentBusiness.push(temp);\n        }else{\n          console.log(\"already paid\");\n        }\n        \n      })\n      console.log(this.allAgentBusiness);\nthis.selectedCategory = [];\n      for (let i = 0; i < this.allAgentBusiness.length; i++) {\n        this.selectedCategory.push(\n          this.allAgentBusiness[i].id\n            );\n        }\n\n      // this.curentUser.email\n     })\n  }else{\n    await this.firestore.collection(\"business\", ref => ref.where('approvedbyadmin', \"==\", 'A').where('createdBy', \"==\", this.agentDetails.email)).get().subscribe((doc:any)=>{\n      console.log(doc);\n      doc.docs.forEach((snapDoc)=>{\n        console.log(snapDoc.data());\n        var temp = snapDoc.data();\n        temp.isChecked =true;\n        temp.id = snapDoc.id;\n        temp.amountToPaySubAgent = temp.amountToPaySubAgent? temp.amountToPaySubAgent:0;\n        if(temp.subAgentPaid != 'true' || temp.subAgentPaid == undefined){\n          this.totalAmount = this.totalAmount+temp.amountToPaySubAgent;\n          // temp.amountToPayAgent = (temp.amountToPayAgent == '' || temp.amountToPayAgent == 'NaN')? 0 : temp.amountToPayAgent;\n          this.allAgentBusiness.push(temp);\n        }else{\n          console.log(\"already paid\");\n          \n        }\n\n      })\n      console.log(this.allAgentBusiness);\nthis.selectedCategory = [];\n      for (let i = 0; i < this.allAgentBusiness.length; i++) {\n        this.selectedCategory.push(\n          this.allAgentBusiness[i].id\n            );\n        }\n\n      // this.curentUser.email\n     })\n  } \n        //  console.log(this.agentDetails);\n      }\n    });\n  }\n\nasync  ngOnInit() {\n\n}\n\n  updateCheckedOptions(id,business) {\n    let idx = this.selectedCategory.indexOf(id);\n    if(this.selection == 'agent'){\n      if (idx > -1) {\n        this.selectedCategory.splice(idx, 1);\n        this.totalAmount = this.totalAmount-business.amountToPayAgent;\n      } else {\n        this.selectedCategory.push(id);\n        this.totalAmount = this.totalAmount+business.amountToPayAgent;\n      }\n    }else{\n      if (idx > -1) {\n        this.selectedCategory.splice(idx, 1);\n        this.totalAmount = this.totalAmount-business.amountToPaySubAgent;\n      } else {\n        this.selectedCategory.push(id);\n        this.totalAmount = this.totalAmount+business.amountToPaySubAgent;\n      }\n    }\n  \n    console.dir(this.selectedCategory);\n  \n    // if( this.selectedCategory.length == this.allAgentBusiness.length){\n    //   this.selectAll =true;\n    // }else{\n    //   this.selectAll =false;\n    // }\n  } \n\n  // changeSelectAll(event){\n  //   console.log(event.detail.checked);\n  //   if(event.detail.checked){\n  //     this.selectedCategory = [];\n  //     for (let i = 0; i < this.allAgentBusiness.length; i++) {\n  //       this.selectedCategory.push(\n  //         this.allAgentBusiness[i].id\n  //           );\n  //       }\n\n  //     // this.curentUser.email\n  //   }\n    \n    \n  // }\n\n  markPayment(){\n    if(this.selection == 'agent'){\nthis.selectedCategory.forEach(async(id)=>{\n  console.log(id);\n  await this.firestore.collection(\"business\").doc(id).update({\n    \"agentPaid\":'true',\n    \"agentPayDate\":new Date().getUTCFullYear()+''+new Date().getUTCMonth()+''+new Date().getUTCDate(),\n             }).catch((error) => {\n              console.log(error);\n              alert(\"Unable to process request\");\n              return;\n             }).then((userResult) => {\n              console.log(userResult);\n              // this.commondataService.allPendingAgents.splice(i,1)\n              return;\n             })\n  \n})\nthis.router.navigate(['adminmonthlypayouts']);\n    }else{\n      this.selectedCategory.forEach(async(id)=>{\n        console.log(id);\n        await this.firestore.collection(\"business\").doc(id).update({\n          \"subAgentPaid\":'true',\n          \"subAgentPayDate\":new Date().getUTCFullYear()+''+new Date().getUTCMonth()+''+new Date().getUTCDate(),\n                   }).catch((error) => {\n                    console.log(error);\n                    alert(\"Unable to process request\");\n                    return;\n                   }).then((userResult) => {\n                    console.log(userResult);\n                    // this.commondataService.allPendingAgents.splice(i,1)\n                    return;\n                   })\n        \n      })\n      this.router.navigate(['adminmonthlypayouts']);\n    }\n  }\n\n}\n"],"names":["Component","AngularFirestore","ActivatedRoute","Router","PayoutallbusinessPage","constructor","route","router","firestore","queryParams","subscribe","params","getCurrentNavigation","extras","state","agentDetails","selection","allAgentBusiness","totalAmount","collection","ref","where","email","get","doc","console","log","docs","forEach","snapDoc","data","temp","isChecked","id","amountToPayAgent","agentPaid","undefined","push","selectedCategory","i","length","amountToPaySubAgent","subAgentPaid","ngOnInit","updateCheckedOptions","business","idx","indexOf","splice","dir","markPayment","update","Date","getUTCFullYear","getUTCMonth","getUTCDate","catch","error","alert","then","userResult","navigate","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}