"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6987],{6987:(Q,l,a)=>{a.r(l),a.d(l,{AddbusinessPageModule:()=>w});var u=a(6895),r=a(4719),o=a(191),m=a(5181),c=a(5861),e=a(4650),g=a(4941),p=a(2796);function _(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&n){const s=e.oxw().$implicit;e.xp6(2),e.Oqu(s.message)}}function f(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,_,3,1,"ng-container",16),e.qZA()),2&n){const s=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.typeOfBorrow.hasError(s.type))}}function b(n,i){if(1&n&&(e.TgZ(0,"ion-select-option",22),e._uU(1),e.qZA()),2&n){const s=i.$implicit;e.s9C("value",s),e.xp6(1),e.Oqu(s)}}function A(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&n){const s=e.oxw().$implicit;e.xp6(2),e.Oqu(s.message)}}function Z(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,A,3,1,"ng-container",16),e.qZA()),2&n){const s=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.bankName.hasError(s.type))}}function v(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&n){const s=e.oxw().$implicit;e.xp6(2),e.Oqu(s.message)}}function x(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,v,3,1,"ng-container",16),e.qZA()),2&n){const s=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.lanNo.hasError(s.type))}}function h(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&n){const s=e.oxw().$implicit;e.xp6(2),e.Oqu(s.message)}}function N(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,h,3,1,"ng-container",16),e.qZA()),2&n){const s=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.name.hasError(s.type))}}function T(n,i){if(1&n){const s=e.EpF();e.TgZ(0,"ion-input",23),e.NdJ("click",function(){e.CHM(s);const d=e.oxw();return e.KtG(d.openDatetime())}),e.qZA()}if(2&n){const s=e.oxw();e.s9C("value",s.selectedDate),e.Q6J("readonly",!0)}}function B(n,i){if(1&n){const s=e.EpF();e.TgZ(0,"div")(1,"ion-datetime",24),e.NdJ("ngModelChange",function(d){e.CHM(s);const J=e.oxw();return e.KtG(J.selectedDate=d)}),e.qZA(),e.TgZ(2,"ion-button",25),e.NdJ("click",function(){e.CHM(s);const d=e.oxw();return e.KtG(d.hideDatetime())}),e._uU(3,"OK"),e.qZA()()}if(2&n){const s=e.oxw();e.xp6(1),e.Q6J("ngModel",s.selectedDate)}}function y(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&n){const s=e.oxw().$implicit;e.xp6(2),e.Oqu(s.message)}}function k(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,y,3,1,"ng-container",16),e.qZA()),2&n){const s=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.disburseDate.hasError(s.type))}}function q(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&n){const s=e.oxw().$implicit;e.xp6(2),e.Oqu(s.message)}}function P(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,q,3,1,"ng-container",16),e.qZA()),2&n){const s=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.disbursedAmount.hasError(s.type))}}function F(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"small",21),e._uU(2),e.qZA(),e.BQk()),2&n){const s=e.oxw().$implicit;e.xp6(2),e.Oqu(s.message)}}function D(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,F,3,1,"ng-container",16),e.qZA()),2&n){const s=i.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.remarks.hasError(s.type))}}const U=[{path:"",component:(()=>{class n{constructor(s,t,d){this.formBuilder=s,this.auth=t,this.firestore=d,this.openDatetimeField=!1,this.selectedDate="",this.banks=[],this.addBusinessForm=this.formBuilder.group({typeOfBorrow:["",[r.kI.required]],bankName:["",[r.kI.required]],lanNo:["",[r.kI.required]],name:["",[r.kI.required,r.kI.pattern("^[a-zA-Z ]+$")]],disburseDate:["",[r.kI.required]],disbursedAmount:["",[r.kI.required,r.kI.pattern("^[0-9]{1,7}")]],remarks:["",[r.kI.required]]}),this.errorMessages={typeOfBorrow:[{type:"required",message:"Please\xa0select type of borrow"}],bankName:[{type:"required",message:"Please\xa0select bank name"}],lanNo:[{type:"required",message:"Please\xa0enter LAN number"}],name:[{type:"required",message:"Please\xa0enter customer name"},{type:"pattern",message:"Please\xa0enter valid name"}],disburseDate:[{type:"required",message:"please select disbursed date"}],disbursedAmount:[{type:"required",message:"Please\xa0enter disbursed amount"},{type:"pattern",message:"Please\xa0enter valid amount"}],remarks:[{type:"required",message:"Please\xa0enter remarks"}]}}get errorControl(){return this.addBusinessForm.controls}get typeOfBorrow(){return this.addBusinessForm.get("typeOfBorrow")}get bankName(){return this.addBusinessForm.get("bankName")}get lanNo(){return this.addBusinessForm.get("lanNo")}get name(){return this.addBusinessForm.get("name")}get disburseDate(){return this.addBusinessForm.get("disburseDate")}get disbursedAmount(){return this.addBusinessForm.get("disbursedAmount")}get remarks(){return this.addBusinessForm.get("remarks")}ngOnInit(){var s=this;return(0,c.Z)(function*(){yield s.firestore.collection("dropdown").doc("bankname").get().subscribe(t=>{console.log(t.data().bankname),s.banks=t.data().bankname})})()}openDatetime(){this.openDatetimeField=!0}hideDatetime(){if(this.openDatetimeField=!1,this.selectedDate){this.selectedDate=this.selectedDate.split("T")[0];var s=this.selectedDate.split("-")[2]+"-"+this.selectedDate.split("-")[1]+"-"+this.selectedDate.split("-")[0];this.selectedDate=s,console.log(this.selectedDate)}}addNewBusiness(){var s=this;return(0,c.Z)(function*(){s.curentUser=JSON.parse(localStorage.userData),console.log(s.selectedDate),yield s.firestore.collection("business").doc().set({typeOfBorrow:s.addBusinessForm.value.typeOfBorrow.trim()?s.addBusinessForm.value.typeOfBorrow.trim():"",bankName:s.addBusinessForm.value.bankName.trim()?s.addBusinessForm.value.bankName.trim():"",lanNo:s.addBusinessForm.value.lanNo.trim()?s.addBusinessForm.value.lanNo.trim():"",name:s.addBusinessForm.value.name.trim()?s.addBusinessForm.value.name.trim():"",disburseDate:s.selectedDate.trim()?s.selectedDate.trim():"",disbursedAmount:s.addBusinessForm.value.disbursedAmount.trim()?s.addBusinessForm.value.disbursedAmount.trim():"",approvedbyadmin:"P",agentPaid:"false",subAgentPaid:"false",remarks:s.addBusinessForm.value.remarks.trim()?s.addBusinessForm.value.remarks.trim():"",createdBy:s.curentUser.email?s.curentUser.email:"",createdByName:s.curentUser.name?s.curentUser.name:"",agent:s.curentUser.enrolledby?s.curentUser.enrolledby:"",agentName:s.curentUser.enrolledbyName?s.curentUser.enrolledbyName:""}).catch(t=>{console.log(t),alert("Unable to process request")}).then(t=>{console.log(t),alert("Business added sucessfully"),s.addBusinessForm.reset()})})()}}return n.\u0275fac=function(s){return new(s||n)(e.Y36(r.qu),e.Y36(g.zQ),e.Y36(p.ST))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-addbusiness"]],decls:57,vars:12,consts:[[1,"header-color"],["slot","start"],["src","../../assets/imgs/addmembers.png","height","35%","width","100%"],["novalidate","",3,"formGroup"],["position","floating"],["placeholder","Type of Loans","interface","action-sheet","formControlName","typeOfBorrow"],["value","home"],["value","personal"],["value","mortgage"],["value","business"],[4,"ngFor","ngForOf"],["placeholder","Bank Name","formControlName","bankName"],[3,"value",4,"ngFor","ngForOf"],["formControlName","lanNo"],["formControlName","name"],[3,"readonly","value","click",4,"ngIf"],[4,"ngIf"],["formControlName","disbursedAmount"],["formControlName","remarks"],[1,"buttonCont"],[1,"loginButton",3,"disabled","click"],[1,"serror-message"],[3,"value"],[3,"readonly","value","click"],["placeholder","Select Date","displayFormat","DD-MM-YYYY","formControlName","disburseDate",3,"ngModel","ngModelChange"],[3,"click"]],template:function(s,t){1&s&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Add Business"),e.qZA()()(),e.TgZ(6,"ion-content"),e._UZ(7,"img",2),e.TgZ(8,"form",3)(9,"ion-item")(10,"ion-label",4),e._uU(11,"Type of Loans"),e.qZA(),e.TgZ(12,"ion-select",5)(13,"ion-select-option",6),e._uU(14,"Home"),e.qZA(),e.TgZ(15,"ion-select-option",7),e._uU(16,"Personal"),e.qZA(),e.TgZ(17,"ion-select-option",8),e._uU(18,"Mortgage"),e.qZA(),e.TgZ(19,"ion-select-option",9),e._uU(20,"Business"),e.qZA()()(),e.YNc(21,f,2,1,"div",10),e.TgZ(22,"ion-item")(23,"ion-label",4),e._uU(24,"Bank Name"),e.qZA(),e.TgZ(25,"ion-select",11),e.YNc(26,b,2,2,"ion-select-option",12),e.qZA()(),e.YNc(27,Z,2,1,"div",10),e.TgZ(28,"ion-item")(29,"ion-label",4),e._uU(30,"Aplication / LAN ID Number "),e.qZA(),e._UZ(31,"ion-input",13),e.qZA(),e.YNc(32,x,2,1,"div",10),e.TgZ(33,"ion-item")(34,"ion-label",4),e._uU(35,"Customer Name"),e.qZA(),e._UZ(36,"ion-input",14),e.qZA(),e.YNc(37,N,2,1,"div",10),e.TgZ(38,"ion-item")(39,"ion-label",4),e._uU(40,"Disbursed Date"),e.qZA(),e.YNc(41,T,1,2,"ion-input",15),e.YNc(42,B,4,1,"div",16),e.qZA(),e.YNc(43,k,2,1,"div",10),e.TgZ(44,"ion-item")(45,"ion-label",4),e._uU(46,"Disbursed Amount "),e.qZA(),e._UZ(47,"ion-input",17),e.qZA(),e.YNc(48,P,2,1,"div",10),e.TgZ(49,"ion-item")(50,"ion-label",4),e._uU(51,"Remarks"),e.qZA(),e._UZ(52,"ion-input",18),e.qZA(),e.YNc(53,D,2,1,"div",10),e.qZA(),e.TgZ(54,"div",19)(55,"ion-button",20),e.NdJ("click",function(){return t.addNewBusiness()}),e._uU(56,"Book Business"),e.qZA()()()),2&s&&(e.xp6(8),e.Q6J("formGroup",t.addBusinessForm),e.xp6(13),e.Q6J("ngForOf",t.errorMessages.typeOfBorrow),e.xp6(5),e.Q6J("ngForOf",t.banks),e.xp6(1),e.Q6J("ngForOf",t.errorMessages.bankName),e.xp6(5),e.Q6J("ngForOf",t.errorMessages.lanNo),e.xp6(5),e.Q6J("ngForOf",t.errorMessages.name),e.xp6(4),e.Q6J("ngIf",!t.openDatetimeField),e.xp6(1),e.Q6J("ngIf",t.openDatetimeField),e.xp6(1),e.Q6J("ngForOf",t.errorMessages.disburseDate),e.xp6(5),e.Q6J("ngForOf",t.errorMessages.disbursedAmount),e.xp6(5),e.Q6J("ngForOf",t.errorMessages.remarks),e.xp6(2),e.Q6J("disabled",!t.addBusinessForm.valid))},dependencies:[u.sg,u.O5,r._Y,r.JJ,r.JL,o.oU,o.YG,o.Sm,o.W2,o.x4,o.Gu,o.pK,o.Ie,o.Q$,o.t9,o.n0,o.wd,o.sr,o.QI,o.j9,o.cs,r.sg,r.u],styles:[".loginButton[_ngcontent-%COMP%], .buttonCont[_ngcontent-%COMP%]{text-align:center}.serror-message[_ngcontent-%COMP%]{color:#f20e0e}"]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild(U),m.Bz]}),n})(),w=(()=>{class n{}return n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,r.u5,o.Pc,O,r.UX]}),n})()}}]);