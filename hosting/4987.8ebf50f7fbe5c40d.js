"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4987],{4987:(L,h,r)=>{r.r(h),r.d(h,{LoginPageModule:()=>C});var f=r(6895),s=r(4719),a=r(191),c=r(5181),p=r(5861),o=r(4650),w=r(4941),P=r(2796),v=r(8960);function Z(e,g){if(1&e&&(o.TgZ(0,"b"),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.hij("Ver: ",t.appVersions,"")}}const y=[{path:"",component:(()=>{class e{constructor(t,n,i,l,d,u,T){this.router=t,this.auth=n,this.firestore=i,this.formBuilder=l,this.appVer=d,this.plt=u,this.toastController=T,this.passwordShow=!1,this.passwordShowType="password",this.loginForm=this.formBuilder.group({email:["",[s.kI.required]],password:["",[s.kI.required]],passwordShow:[!1,[]]}),console.log(this.appVer),this.appVer.getVersionNumber().then(m=>{this.appVersions=m,console.log(this.appVersions)}).catch(m=>{console.log(m)}),this.devicePlatform=this.plt.is("android")||this.plt.is("ios")?"Mobile":"Web"}ngOnInit(){try{localStorage.pin&&this.goto("loginwithpin")}catch{}}get errorControl(){return this.loginForm.controls}login(){var t=this;return(0,p.Z)(function*(){console.log(t.loginForm.value),""!=t.loginForm.value.email.trim()&&""!=t.loginForm.value.password.trim()?t.auth.signInWithEmailAndPassword(t.loginForm.value.email.trim(),t.loginForm.value.password).then(function(){var n=(0,p.Z)(function*(i){if(console.log(i),(yield t.toastController.create({message:"Logged in with "+t.loginForm.value.email.trim(),duration:5e3,position:"top"})).present(),i.user.uid){const d=t.firestore.collection("users").doc(t.loginForm.value.email.trim());t.colldata=d.get().subscribe(u=>(console.log(u.data()),localStorage.userData=JSON.stringify(u.data()),localStorage.role=JSON.stringify(u.data().role),"admin"==u.data().role?t.goto("admin"):t.goto("loginwithpin"),u.data())),console.log(t.colldata),localStorage.uuid=JSON.stringify(i.user.uid)}else(yield t.toastController.create({message:"Something Went Wrong... Please contact Admin/Agent",duration:5e3,position:"top"})).present()});return function(i){return n.apply(this,arguments)}}()).catch(function(){var n=(0,p.Z)(function*(i){console.log(i),(yield t.toastController.create({message:"Something Went Wrong... Please contact Admin/Agent",duration:5e3,position:"top"})).present()});return function(i){return n.apply(this,arguments)}}()):alert("Please enter email and password")})()}goto(t){this.router.navigate([t])}showPassword(){this.passwordShowType=this.passwordShow?"text":"password"}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(c.F0),o.Y36(w.zQ),o.Y36(P.ST),o.Y36(s.qu),o.Y36(v.b),o.Y36(a.t4),o.Y36(a.yF))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:32,vars:5,consts:[["src","../../assets/imgs/loginscreen.PNG","height","50%","width","100%"],[1,"container-fields"],[1,"buttonCont"],["novalidate","",1,"login-form",3,"formGroup"],["position","floating",1,"label-style"],["formControlName","email",2,"text-align","center"],["formControlName","password",2,"text-align","center",3,"type"],["formControlName","passwordShow","slot","start",3,"ngModel","ngModelChange","ionChange"],["shape","round",1,"loginButton",3,"click"],[3,"click"],[2,"text-align","center"],[4,"ngIf"]],template:function(t,n){1&t&&(o.TgZ(0,"ion-content"),o._UZ(1,"img",0),o.TgZ(2,"div",1)(3,"h3",2),o._uU(4,"Login"),o.qZA(),o.TgZ(5,"form",3)(6,"ion-item")(7,"ion-label",4),o._uU(8,"Email ID"),o.qZA(),o._UZ(9,"ion-input",5),o.qZA(),o.TgZ(10,"ion-item")(11,"ion-label",4),o._uU(12,"Password"),o.qZA(),o._UZ(13,"ion-input",6),o.qZA(),o.TgZ(14,"ion-item")(15,"ion-checkbox",7),o.NdJ("ngModelChange",function(l){return n.passwordShow=l})("ionChange",function(){return n.showPassword()}),o.qZA(),o.TgZ(16,"ion-label"),o._uU(17,"Show Password"),o.qZA()(),o.TgZ(18,"div",2)(19,"ion-button",8),o.NdJ("click",function(){return n.login()}),o._uU(20,"Sign In"),o.qZA()(),o._UZ(21,"br"),o.TgZ(22,"div",2)(23,"a",9),o.NdJ("click",function(){return n.goto("register")}),o._uU(24,"Don't have an account ? Sign Up"),o.qZA()(),o._UZ(25,"br"),o.TgZ(26,"div",2)(27,"a",9),o.NdJ("click",function(){return n.goto("forgotpassword")}),o._uU(28,"Forgot Password ?"),o.qZA()()(),o.TgZ(29,"p",10),o._uU(30),o.YNc(31,Z,2,1,"b",11),o.qZA()()()),2&t&&(o.xp6(5),o.Q6J("formGroup",n.loginForm),o.xp6(8),o.s9C("type",n.passwordShowType),o.xp6(2),o.Q6J("ngModel",n.passwordShow),o.xp6(15),o.hij("Platform: ",n.devicePlatform," "),o.xp6(1),o.Q6J("ngIf","Web"!=n.devicePlatform))},dependencies:[f.O5,s._Y,s.JJ,s.JL,a.YG,a.nz,a.W2,a.pK,a.Ie,a.Q$,a.w,a.j9,s.sg,s.u],styles:[".loginButton[_ngcontent-%COMP%], .buttonCont[_ngcontent-%COMP%]{text-align:center}ion-input[_ngcontent-%COMP%]{border-bottom:2px solid #5050f7}.label-style[_ngcontent-%COMP%]{margin-top:2px;text-align:center}"]}),e})()}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[c.Bz.forChild(y),c.Bz]}),e})(),C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[f.ez,s.u5,a.Pc,S,s.UX]}),e})()}}]);